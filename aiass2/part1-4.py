# ECSE 526
# Assignment 2
# Stepan Salenikovich
# Feb 27, 2013

import numpy as np

print """

Q4
---------------
"""
increment = 0.5	# the amount by which r will be incrmented

# init r with the given increment
r = np.arange(-4.0, 0, increment)

# matrix as in Q2
A = np.array([
	[0.28, 0.0, 0.0, 0.0, -0.18, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
	[-0.63, 0.73, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
	[0.0, -0.63, 0.91, 0.0, 0.0, -0.18, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
	[0.0, 0.0, -0.63, 0.91, 0.0, 0.0, -0.18, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
	[-0.09, 0.0, 0.0, 0.0, 0.37, 0.0, 0.0, -0.18, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
	[0.0, 0.0, -0.09, 0.0, 0.0, 0.37, 0.0, 0.0, 0.0, -0.18, 0.0, 0.0, 0.0, 0.0],
	[0.0, 0.0, 0.0, -0.09, 0.0, -0.7, 0.82, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
	[0.0, 0.0, 0.0, 0.0, 0.0, -0.09, 0.0, 0.37, 0.0, 0.0, -0.18, 0.0, 0.0, 0.0],
	[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.63, 0.91, 0.0, 0.0, -0.18, 0.0, 0.0],
	[0.0, 0.0, 0.0, 0.0, 0.0, -0.09, 0.0, 0.0, -0.63, 1.0, 0.0, 0.0, -0.18, 0.0],
	[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0],
	[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0],
	[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.09, 0.0, -0.63, 0.82, 0.0],
	[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.63, 0.73]
			])

# init b vector
b = []
for i in range(len(r)):
	b.append(np.array([r[i], r[i], r[i], r[i], r[i], r[i], r[i], r[i], r[i], r[i], 1.0, -1.0, r[i], r[i]]))

# solve for states
u = []
for i in range(len(r)):
	u.append(np.linalg.solve(A,b[i]))

#locations = {(1,1):0 (1,2):1, (1,3):2, (1,4):3, (2,1):4, (2,3):5, (2,4):6 ,(3,1):7 ,(3,2):8, (3,3):9, (4,1):10, (4,2):11, (4,3):12, (4,4):13}

# state (3,2), (2,1), (4,4)
y = [[],[],[]]
for i in range(len(r)):
	y[0].append(u[i][8]) #locations[(3,2)]])
	y[1].append(u[i][4]) #locations[(2,1)]])
	y[2].append(u[i][13]) #locations[(4,4)]])

# plot utilites of state (3,2), (2,1), and (4,4) v.s. r
import matplotlib.pyplot as plt
plt.plot(r, y[0], marker='o', linestyle='-', label = 'U(3,2)')
plt.plot(r, y[1], marker='x', linestyle='-', label = 'U(2,1)')
plt.plot(r, y[2], marker='v', linestyle='-', label = 'U(4,4)')
plt.legend(loc=4)
plt.ylabel("state utility")
plt.xlabel("value of r")
plt.show()